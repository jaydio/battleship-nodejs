<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battleship - Multiplayer Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Main Menu -->
        <div id="mainMenu" class="screen active">
            <h1>ðŸš¢ Battleship</h1>
            <div class="menu-buttons">
                <button id="createGameBtn" class="btn primary">Create New Game</button>
                <button id="refreshSessionsBtn" class="btn secondary">Refresh Sessions</button>
                <button id="archiveBtn" class="btn secondary">View Archive</button>
            </div>
            
            <!-- Create Game Modal -->
            <div id="createGameModal" class="modal">
                <div class="modal-content">
                    <span class="close" id="closeCreateModal">&times;</span>
                    <h2>Create New Game</h2>
                    <form id="createGameForm">
                        <label for="sessionName">Game Name:</label>
                        <input type="text" id="sessionName" required maxlength="30" placeholder="Enter a descriptive game name">
                        
                        <label for="creatorName">Your Name:</label>
                        <input type="text" id="creatorName" required maxlength="20" placeholder="Enter your name">
                        
                        <label for="gamePassword">Password (optional):</label>
                        <input type="password" id="gamePassword" placeholder="Leave empty for public game">
                        
                        <button type="submit" class="btn primary">Create Game</button>
                    </form>
                    <button id="cancelCreateBtn" class="btn secondary">Cancel</button>
                </div>
            </div>

            <!-- Active Sessions -->
            <div id="activeSessions">
                <h3>Active Sessions</h3>
                <div id="sessionsList"></div>
            </div>

            <!-- Join Game Modal -->
            <div id="joinGameModal" class="modal">
                <div class="modal-content">
                    <h3>Join Game</h3>
                    <input type="text" id="joinPlayerName" placeholder="Enter your name (optional)">
                    <input type="password" id="joinPassword" placeholder="Enter password (if required)">
                    <div class="modal-buttons">
                        <button id="confirmJoinBtn" class="btn primary">Join Game</button>
                        <button id="cancelJoinBtn" class="btn secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Waiting Room -->
        <div id="waitingRoom" class="screen">
            <h2>Waiting for Players...</h2>
            <div id="gameInfo">
                <p>Session ID: <span id="sessionId"></span></p>
                <p id="inviteLink" style="display: none;">
                    Invite Link: <span id="inviteLinkText"></span>
                    <button id="copyLinkBtn" class="btn small">Copy</button>
                </p>
                <p>Players: <span id="playerCount">1</span>/2</p>
            </div>
            <button id="leaveGameBtn" class="btn secondary">Leave Game</button>
        </div>

        <!-- Ship Placement -->
        <div id="shipPlacement" class="screen">
            <h2>Place Your Ships</h2>
            <div class="placement-container">
                <div class="grid-container">
                    <div id="placementGrid" class="grid"></div>
                </div>
                <div class="ship-selection">
                    <h3>Ships to Place</h3>
                    <div id="shipsToPlace">
                        <div class="ship-item" data-size="5" data-name="Carrier">
                            <span>Carrier (5)</span>
                            <div class="ship-preview" data-size="5"></div>
                        </div>
                        <div class="ship-item" data-size="4" data-name="Battleship">
                            <span>Battleship (4)</span>
                            <div class="ship-preview" data-size="4"></div>
                        </div>
                        <div class="ship-item" data-size="3" data-name="Cruiser">
                            <span>Cruiser (3)</span>
                            <div class="ship-preview" data-size="3"></div>
                        </div>
                        <div class="ship-item" data-size="3" data-name="Submarine">
                            <span>Submarine (3)</span>
                            <div class="ship-preview" data-size="3"></div>
                        </div>
                        <div class="ship-item" data-size="2" data-name="Destroyer">
                            <span>Destroyer (2)</span>
                            <div class="ship-preview" data-size="2"></div>
                        </div>
                    </div>
                    <button id="rotateBtn" class="btn secondary">Rotate Ship</button>
                    <button id="randomPlacementBtn" class="btn secondary">Random Placement</button>
                    <button id="confirmPlacementBtn" class="btn primary" disabled>Confirm Placement</button>
                </div>
            </div>
        </div>

        <!-- Game Board -->
        <div id="gameBoard" class="screen">
            <div id="gameStatus">
                <h2 id="turnIndicator">Waiting for game to start...</h2>
                <div id="hostControls" style="display: none;">
                    <span id="hostIndicator">ðŸŽ® You are the Host</span>
                    <button id="pauseBtn" class="btn secondary">Pause Game</button>
                    <button id="resumeBtn" class="btn secondary" style="display: none;">Resume Game</button>
                </div>
                <div id="gameTimer">
                    <span>Time Remaining: <span id="moveTimer">30s</span></span>
                </div>
                <div id="gameStats">
                    <span>Hits: <span id="hitCount">0</span></span>
                    <span>Misses: <span id="missCount">0</span></span>
                </div>
            </div>
            
            <div class="boards-container">
                <div class="board-section">
                    <h3>Your Fleet</h3>
                    <div id="playerGrid" class="grid"></div>
                    <div class="player-name" id="playerName">You</div>
                </div>
                
                <div class="board-section">
                    <h3>Enemy Waters</h3>
                    <div id="enemyGrid" class="grid"></div>
                    <div class="player-name" id="opponentName">Opponent</div>
                </div>
            </div>

            <button id="leaveGameBtn2" class="btn secondary">Leave Game</button>
        </div>

        <!-- Game Over -->
        <div id="gameOver" class="screen">
            <h2 id="gameResult"></h2>
            <button id="newGameBtn" class="btn primary">New Game</button>
        </div>
    </div>

    <!-- Archive Modal -->
    <div id="archiveModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeArchiveModal">&times;</span>
            <h2>Game Archive</h2>
            <div id="archiveList">
                <p>Loading archive...</p>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>
